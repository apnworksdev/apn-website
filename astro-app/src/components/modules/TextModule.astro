---
import type { TextModule } from "../../utils/sanity";
import PortableText from "../PortableText.astro";

interface Props {
  module: TextModule;
}

const { module } = Astro.props;
const alignment = module.alignment || "justify";

// Filter out text blocks without content
const textBlocks = module.text?.filter((textBlock) => textBlock.content && textBlock.content.length > 0) || [];
const columns = textBlocks.length;
---

<section class="module module--text font-m" data-columns={columns} data-alignment={alignment}>
  {textBlocks.map((textBlock) => (
    <PortableText class="text-column" content={textBlock.content!} />
  ))}
</section>
